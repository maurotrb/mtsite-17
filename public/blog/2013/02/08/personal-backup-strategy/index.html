<!DOCTYPE html>
<html class="has-navbar-fixed-top" lang="en">
  <head>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-23038857-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-23038857-1', { 'anonymize_ip': true });
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Personal backup strategy</title>
    <meta name="description" content="Mauro Taraborelli&#39;s Personal Site and Blog">
    <meta name="author" content="Mauro Taraborelli">

    <link rel="stylesheet" href="https://www.maurotaraborelli.com/css/mtsite.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    
    <meta name="generator" content="Hugo 0.30.2" />
  </head>
  <body>
    <header id="site-navbar">
      <nav class="navbar is-fixed-top container">
        <div class="navbar-brand">
          <a class="navbar-item" id="logo" href="">Mauro Taraborelli</a>
          <button class="button navbar-burger" data-target="navMenu">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
        <div class="navbar-menu" id="navMenu">
          <div class="navbar-start">
	    
	    <a class="navbar-item" href="/blog/">BLOG</a>
            
	    <a class="navbar-item" href="/projects/">PROJECTS</a>
            
	    <a class="navbar-item" href="/resume/">RESUME</a>
            
          </div>

          <div class="navbar-end">
            <a class="navbar-item" href="https://www.linkedin.com/in/maurotaraborelli">
              <span class="icon">
                <i class="fa fa-lg fa-linkedin"></i>
              </span>
            </a>
            <a class="navbar-item" href="https://github.com/maurotrb">
              <span class="icon">
                <i class="fa fa-lg fa-github"></i>
              </span>
            </a>
            <div class="navbar-item buttons has-addons">
              
              
              
              
              
              
              <a class="button is-primary is-outlined" href="/it">
                <span class="icon is-small">
                  <i class="fa fa-exchange"></i>
                </span>
                <span>Italiano</span>
                <span class="icon is-small">
                  <i class="fa fa-globe"></i>
                </span>
              </a>
              
              
            </div>
          </div>
        </div>
      </nav>
    </header>
    
<div class="container">
  <div class="columns">
    <div class="column is-four-fifths">
      <main class="section">
        <header>
          <h1 class="title is-2">Personal backup strategy</h1>
          <p class="subtitle is-5">
            2013-02-08 â€” Article of 800 words
            
            

<a class="tag is-rounded" href="https://www.maurotaraborelli.com/tags/programming">Programming</a>

<a class="tag is-rounded" href="https://www.maurotaraborelli.com/tags/git">Git</a>

<a class="tag is-rounded" href="https://www.maurotaraborelli.com/tags/unison">Unison</a>

<a class="tag is-rounded" href="https://www.maurotaraborelli.com/tags/mr">mr</a>

<a class="tag is-rounded" href="https://www.maurotaraborelli.com/tags/robocopy">Robocopy</a>

<a class="tag is-rounded" href="https://www.maurotaraborelli.com/tags/truecrypt">TrueCrypt</a>

<a class="tag is-rounded" href="https://www.maurotaraborelli.com/tags/backup">Backup</a>



          </p>
        </header>
        <section class="section">
          <div class="content">
            <h2 id="the-problem">The problem</h2>

<p>I use a Windows desktop at work, another one at home, and a Linux laptop during commuting.
The laptop is for personal projects and the home desktop is for photo management and retouching.
Many of the files are shared, so I have to synchronize them among computers.
Moreover I want to have an up-to-date copy of the files in my home NAS,
from where I can make a backup.</p>

<p>
I started some years ago with a manual solution: moving files among computers
using a USB disk. But it was easy to overlook something or to overwrite files
with older versions.</p>

<p>So I searched for a better method.</p>

<p>By reading articles and blog posts, I evolved my requirements from a simple safe
copy to a complete synchronization and backup strategy, and I tried to develop
a more robust and automated solution.</p>

<h2 id="the-requirements">The requirements</h2>

<p>To sum up the requirements, it must be possible to:</p>

<ul>
<li>view which files are changed on a computer and easily synchronize them
with other computers</li>
<li>configure the synchronization to specify which files must be synchronized
and which not</li>
<li>synchronize an up-to-date copy of all important files to a centralized
location from where I can make a backup</li>
<li>easily backup and restore files maintaining multiple verified copies</li>
<li>use the the same procedures on Windows and Linux (where possible, see later)</li>
</ul>

<p>These requirements are based on two core concepts:</p>

<ul>
<li><strong>synchronization and backup must be easy</strong>: if they weren&rsquo;t easy,
I won&rsquo;t do it that often, loosing many of the benefits of such a strategy</li>
<li><strong>synchronization and backup are distinct tasks</strong>: synchronization is about
availability, backup is about insurance; maybe they can use the same tools,
but treating them separately could help to devise a better overall strategy</li>
</ul>

<h2 id="the-solution-for-now">The solution (for now)</h2>

<h3 id="synchronization">Synchronization</h3>

<p>The synchronization strategy is based on treating differently text files and
binary files.</p>

<p>Software projects, Linux dot files, Emacs configuration, text documents and notes
are all maintained in several git repositories and synchronized through a combination
of private and public Bitbucket projects. Open source projects are synchronized even
on Github.
I use <a href="http://joeyh.name/code/mr/" title="mr">mr</a> to clone and combine these repositories into my home directory.
With <code>mr update</code>, <code>mr status</code> and <code>mr push</code> I can easily manage and synchronize the
home directories of my Linux and Windows (Cygwin) systems.</p>

<p>Office documents, pdf files, and images are synchronized among computers using my
home NAS as a &ldquo;hub&rdquo;. The synchronization is made with <a href="http://www.cis.upenn.edu/~bcpierce/unison/" title="Unison">Unison</a> on Linux and with
<a href="http://allwaysync.com/" title="Allway Sync">Allway Sync</a> on Windows. I chose different tools because Allway Sync is more
efficient on Windows, especially if you consider that from the home
desktop I synchronize my photographic archive of more than 100 GB.</p>

<p>This strategy has some important limitations:</p>

<ul>
<li>I can synchronize text files everywhere there is an Internet connection,
but I can synchronize binary files only at home; for me this is not
a problem as binary files are mainly for reference and so I don&rsquo;t need to
update them so often</li>
<li>the system works better if you use more text file than binary files
(see the previous point); I slowly changed my habit by switching
from Office documents to text files, but I have no regret because I learned
<a href="http://www.gnu.org/software/emacs/" title="Emacs">Emacs</a> and its terrific <a href="http://orgmode.org/" title="Org mode">Org mode</a></li>
</ul>

<p>If you need to work on multiple systems and you can stand those limitations,
you will gain in flexibility and speed.</p>

<h3 id="backup">Backup</h3>

<p>The backup strategy is based on my home NAS, where I have two file groups:</p>

<ul>
<li><strong>irreplaceables</strong>: if I loose these files I can&rsquo;t reproduce them anymore; they
are, for the most part, the files synchronized among computers and to the
NAS itself: projects, documents, notes, photos</li>
<li><strong>replaceables</strong>: if I loose these files I can reproduce them again (for example
a copy of a photo exported in a particular format, that I can reproduce from
the original); they are partly synchronized among computers and partly only
present on NAS</li>
</ul>

<p>Replaceable files are mirrored to an USB disk (500 GB) that I keep at home.</p>

<p>Irreplaceable files are mirrored to two USB disks (500 GB), that I rotate weekly
among home and workplace. The disks are encrypted with <a href="http://www.truecrypt.org/" title="TrueCrypt">TrueCrypt</a>, and the
copy is verified with MD5 hashes using <a href="https://github.com/maurotrb/haskdeep" title="haskdeep">HaskDeep</a>.
So if something very bad happen, and I loose the data synchronized on all my computers
and on NAS, I have a safe copy that could be at worst one week old.</p>

<p>The mirroring is made on the Windows desktop using <a href="http://en.wikipedia.org/wiki/Robocopy" title="Robocopy">Robocopy</a>.</p>

<h2 id="reference">Reference</h2>

<p>You can find many articles and blog posts on synchronization and backup.
For me, the most useful have been:</p>

<ul>
<li><a href="http://joeyh.name/svnhome/">Subverting your homedir, or keeping your life in svn</a></li>
<li><a href="http://tratt.net/laurie/tech_articles/articles/home_directory_synchronization">Home Directory Synchronization</a></li>
<li><a href="http://www.hanselman.com/blog/ABasicNoncloudbasedPersonalBackupStrategy.aspx">A basic non-cloud-based personal backup strategy</a></li>
</ul>
          </div>
        </section>
      </main>
      
<aside class="section">
  <div class="level box">
    <div class="level-left">
      
      <p class="level-item">
        <a href="https://www.maurotaraborelli.com/blog/2014/01/30/photography-portfolio-site-a-new-project/">
          <span class="icon is-small">
            <i class="fa fa-arrow-left"></i>
          </span>
          <span>Photography portfolio site: a new project</span>
        </a>
      </p>
      
    </div>
    <div class="level-left">
      
      <p class="level-item">
        <a href="https://www.maurotaraborelli.com/blog/2012/05/18/trying-out-shake-library/">
          <span>Trying out Shake library</span>
          <span class="icon is-small">
            <i class="fa fa-arrow-right"></i>
          </span>
        </a>
      </p>
      
    </div>
  </div>
</aside>

    </div>
    <div class="column">
      <aside id="sidebar">
        <section class="section">
  <div class="level">
    <div class="level-item">
      <figure class="image is-128x128 round-portrait">
        <img src="/img/mauro-taraborelli-portrait-256.jpg" alt="Mauro Taraborelli Portrait">
      </figure>
    </div>
  </div>
  <div class="level">
    <div class="level-item">
      <div class="content">
        I&rsquo;m <strong>Mauro Taraborelli</strong>, an IT Business Analyst and Project Manager, from Italy. Contact me by <a href="mail:mauro@maurotaraborelli.com">email</a>.
      </div>
    </div>
  </div>
</section>

        <section class="section" id="tags">
  <h1 class="title is-6">Explore this site</h1>
  <div class="tags">
    
    <a class="tag is-info is-rounded" href="/tags/programming">Programming (17)</a>
    
    <a class="tag is-info is-rounded" href="/tags/haskell">Haskell (10)</a>
    
    <a class="tag is-info is-rounded" href="/tags/quote">Quote (10)</a>
    
    <a class="tag is-info is-rounded" href="/tags/coursera">Coursera (6)</a>
    
    <a class="tag is-info is-rounded" href="/tags/mooc">MOOC (6)</a>
    
    <a class="tag is-info is-rounded" href="/tags/data-science">Data Science (5)</a>
    
    <a class="tag is-info is-rounded" href="/tags/project-euler">Project Euler (5)</a>
    
    <a class="tag is-info is-rounded" href="/tags/r">R (5)</a>
    
    <a class="tag is-info is-rounded" href="/tags/business">Business (4)</a>
    
    <a class="tag is-info is-rounded" href="/tags/photography">Photography (4)</a>
    
    <a class="tag is-info is-rounded" href="/tags/ruby">Ruby (3)</a>
    
    <a class="tag is-info is-rounded" href="/tags/foundation">Foundation (2)</a>
    
    <a class="tag is-info is-rounded" href="/tags/hakyll">Hakyll (2)</a>
    
    <a class="tag is-info is-rounded" href="/tags/learning">Learning (2)</a>
    
    <a class="tag is-info is-rounded" href="/tags/rake">Rake (2)</a>
    
    <a class="tag is-info is-rounded" href="/tags/web">Web (2)</a>
    
    <a class="tag is-info is-rounded" href="/tags/writing">Writing (2)</a>
    
    <a class="tag is-info is-rounded" href="/tags/backup">Backup (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/git">Git (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/imagemagick">Imagemagick (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/jazz">Jazz (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/latex">LaTeX (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/mocc">MOCC (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/management">Management (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/music">Music (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/octopress">Octopress (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/robocopy">Robocopy (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/truecrypt">TrueCrypt (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/unison">Unison (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/xetex">XeTeX (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/edx">edX (1)</a>
    
    <a class="tag is-info is-rounded" href="/tags/mr">mr (1)</a>
    
    
  </div>
</section>

      </aside>
    </div>
  </div>
</div>

    <footer class="footer" id="site-footer">
      <div class="container">
        <div class="columns">
          <div class="column">
            <div class="content has-text-centered is-small">
              <p>Code examples licensed <a href="http://opensource.org/licenses/mit-license.php">MIT</a>.</p>
              <p>Content licensed <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>.</p>
              <p>Source available at <a href="https://github.com/maurotrb/mtsite-17">GitHub</a></p>
            </div>
          </div>
          <div class="column">
            <div class="content has-text-centered">
              <p>Mauro Taraborelli&#39;s Personal Site and Blog</p>
              <p>
                <a href="https://www.linkedin.com/in/maurotaraborelli">
                  <span class="icon">
                    <i class="fa fa-lg fa-linkedin"></i>
                  </span>
                </a>
                <a href="https://github.com/maurotrb">
                  <span class="icon">
                    <i class="fa fa-lg fa-github"></i>
                  </span>
                </a>
              </p>
            </div>
          </div>
          <div class="column">
            <div class="content has-text-centered is-small">
              <p>Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://bulma.io">Bulma</a></p>
              <p><a href="//www.iubenda.com/privacy-policy/8268024" class="iubenda-white iubenda-embed" title="Privacy Policy">Privacy Policy</a><script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src = "//cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_SVG"></script>
    <script src="/js/mtsite.js"></script>
  </body>
</html>
